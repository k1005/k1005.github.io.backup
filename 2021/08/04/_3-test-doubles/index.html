<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3. 테스트 더블 | Hyeyumpa&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo-600.png" type="image/png">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/logo-600.png" type="image/png">
    <script src="//kit.fontawesome.com/77ccd52175.js" crossorigin="anonymous"></script>
    <script src="//connect.facebook.net/ko_KR/sdk.js#xfbml=1&amp;version=v6.0&amp;appId=1033259557069380&amp;autoLogAppEvents=1" async="true" defer="true" crossorigin="anonymous"></script>
    <script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9601639945221390" async="true" crossorigin="anonymous"></script>
    <link rel="alternate" type="application/rss+xml" href="https://k1005.github.io/rss.xml" title="Hyeyumpa&#39;s Blog RSS Feed">
    <meta name="description" content="3. 테스트 더블 > Written by Alex Jover Morales Test doubles, spies, and mocking, 모두 흥미롭게 들리지만 실제로 의미하는 바는 무엇입니까? 정말로 내 코드를 감시해야 합니까, 아니면 mocking 해야 합니까? 알아 보자! 의존성 다루기 애플리케이션을 빌드할 때 코드를 구조화하기 시작하여 애플리케이션 전체에서 가져오고 재사용하는 다른 구성 요소와 모듈로 코드를 분리합니다. 모듈이 다른 모듈을 가져올 때 마지막 모듈이 첫 번째 모듈의 종속성이 됩니다. 예를 들어, 학생 ID의 존재 ...">
    <meta property="article:published_time" content="2021-08-04T22:00:00.000Z">
    <meta property="og:site_name" content="Hyeyumpa's Blog">
    <meta property="og:title" content="3. 테스트 더블">
    <meta property="og:description" content="3. 테스트 더블 > Written by Alex Jover Morales Test doubles, spies, and mocking, 모두 흥미롭게 들리지만 실제로 의미하는 바는 무엇입니까? 정말로 내 코드를 감시해야 합니까, 아니면 mocking 해야 합니까? 알아 보자! 의존성 다루기 애플리케이션을 빌드할 때 코드를 구조화하기 시작하여 애플리케이션 전체에서 가져오고 재사용하는 다른 구성 요소와 모듈로 코드를 분리합니다. 모듈이 다른 모듈을 가져올 때 마지막 모듈이 첫 번째 모듈의 종속성이 됩니다. 예를 들어, 학생 ID의 존재 ...">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://k1005.github.io/2021/08/04/_3-test-doubles/">
    <meta property="og:image" content="https://avatars.githubusercontent.com/u/8636642?v=4">
    <meta name="twitter:title" content="3. 테스트 더블">
    <meta name="twitter:description" content="3. 테스트 더블 > Written by Alex Jover Morales Test doubles, spies, and mocking, 모두 흥미롭게 들리지만 실제로 의미하는 바는 무엇입니까? 정말로 내 코드를 감시해야 합니까, 아니면 mocking 해야 합니까? 알아 보자! 의존성 다루기 애플리케이션을 빌드할 때 코드를 구조화하기 시작하여 애플리케이션 전체에서 가져오고 재사용하는 다른 구성 요소와 모듈로 코드를 분리합니다. 모듈이 다른 모듈을 가져올 때 마지막 모듈이 첫 번째 모듈의 종속성이 됩니다. 예를 들어, 학생 ID의 존재 ...">
    <meta name="twitter:url" content="https://k1005.github.io/2021/08/04/_3-test-doubles/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://avatars.githubusercontent.com/u/8636642?v=4">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="development, frontend, javascript, vuejs, 전문가 처럼 테스트하기, test javascript, mock, jest">
    <meta property="article:tag" content="development">
    <meta name="twitter:site" content="@erim1005">
    <meta name="twitter:creator" content="@erim1005">
    <meta name="keywords" content="기술문서 번역, java, vuejs, vuepress, javascript, 웹개발, 웹코딩, springframework, springboot, spring">
    <meta name="naver-site-verification" content="a3e5421d489aa737922b57a3a910972010e1a357">
    <meta name="google-site-verification" content="6yx1tlT3NjmmcR9cCabq6lBORnVN1ARGXj3rxX52dlQ">
    
    <link rel="preload" href="/assets/css/0.styles.194ade1f.css" as="style"><link rel="preload" href="/assets/js/app.e5f7cc48.js" as="script"><link rel="preload" href="/assets/js/16.690b3b0e.js" as="script"><link rel="preload" href="/assets/js/3.38012cba.js" as="script"><link rel="preload" href="/assets/js/5.79f8738c.js" as="script"><link rel="preload" href="/assets/js/34.7b627c38.js" as="script"><link rel="preload" href="/assets/js/8.f0118cfa.js" as="script"><link rel="preload" href="/assets/js/11.48883e5c.js" as="script"><link rel="prefetch" href="/assets/js/10.414f54b0.js"><link rel="prefetch" href="/assets/js/12.11d837b6.js"><link rel="prefetch" href="/assets/js/13.6038cbc2.js"><link rel="prefetch" href="/assets/js/14.c3e3b56b.js"><link rel="prefetch" href="/assets/js/15.bcd04145.js"><link rel="prefetch" href="/assets/js/17.38335af7.js"><link rel="prefetch" href="/assets/js/18.1edcf5f9.js"><link rel="prefetch" href="/assets/js/19.b47fd8ee.js"><link rel="prefetch" href="/assets/js/20.67a4a82b.js"><link rel="prefetch" href="/assets/js/21.0cf7fd2d.js"><link rel="prefetch" href="/assets/js/22.2c8205cd.js"><link rel="prefetch" href="/assets/js/23.82f895e7.js"><link rel="prefetch" href="/assets/js/24.a9a4f24e.js"><link rel="prefetch" href="/assets/js/25.71390fd7.js"><link rel="prefetch" href="/assets/js/26.a3c3d773.js"><link rel="prefetch" href="/assets/js/27.0ae61d98.js"><link rel="prefetch" href="/assets/js/28.38fd0f05.js"><link rel="prefetch" href="/assets/js/29.b61a48d6.js"><link rel="prefetch" href="/assets/js/30.0e589ab5.js"><link rel="prefetch" href="/assets/js/31.9eacc261.js"><link rel="prefetch" href="/assets/js/32.b223e454.js"><link rel="prefetch" href="/assets/js/33.da66c1d4.js"><link rel="prefetch" href="/assets/js/35.ab52d407.js"><link rel="prefetch" href="/assets/js/36.56819ca9.js"><link rel="prefetch" href="/assets/js/37.c8cb8cce.js"><link rel="prefetch" href="/assets/js/38.5698843e.js"><link rel="prefetch" href="/assets/js/39.8ad1ff3a.js"><link rel="prefetch" href="/assets/js/4.5f14165b.js"><link rel="prefetch" href="/assets/js/40.b43debfa.js"><link rel="prefetch" href="/assets/js/41.104f43fa.js"><link rel="prefetch" href="/assets/js/42.9d726d91.js"><link rel="prefetch" href="/assets/js/43.6d5f1c30.js"><link rel="prefetch" href="/assets/js/44.21f54e68.js"><link rel="prefetch" href="/assets/js/6.335b8a69.js"><link rel="prefetch" href="/assets/js/7.91519298.js"><link rel="prefetch" href="/assets/js/9.496fcad8.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.7d6c679c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.194ade1f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-app="true" id="app" class="v-application component-base-layout v-application--is-ltr theme--light"><div class="v-application--wrap"><header class="v-sheet theme--light v-toolbar v-app-bar v-app-bar--elevate-on-scroll v-app-bar--fixed v-app-bar--hide-shadow" style="height:56px;margin-top:0px;transform:translateY(0px);left:0px;right:0px;"><div class="v-toolbar__content" style="height:56px;"><div class="container d-flex align-center"><div class="v-toolbar__title mr-auto d-flex align-center" style="cursor:pointer;"><div class="site-title"><i aria-hidden="true" class="v-icon notranslate mdi mdi-pencil-box-outline theme--light"></i> <span><strong>Hyeyumpa's Blog</strong></span></div></div> <button type="button" aria-label="menu" class="d-block d-md-none v-btn v-btn--icon v-btn--round theme--light v-size--default"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-menu theme--light"></i></span></button></div></div></header> <aside id="drawer" class="py-3 v-navigation-drawer v-navigation-drawer--close v-navigation-drawer--fixed v-navigation-drawer--is-mobile v-navigation-drawer--right v-navigation-drawer--temporary theme--light" style="height:100%;top:0px;transform:translateX(100%);width:256px;"><div class="v-navigation-drawer__content"><button type="button" class="v-btn v-btn--fab v-btn--fixed v-btn--has-bg v-btn--right v-btn--round theme--light v-size--x-small grey"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-close theme--light"></i></span></button> <div class="component-sidebar"><div></div> <div class="search-box mb-5"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <section class="block profile"><h3 class="mt-0 mb-5">Profile</h3> <div class="d-flex"><div class="v-avatar mr-3" style="height:48px;min-width:48px;width:48px;"><img src="https://avatars.githubusercontent.com/u/8636642?v=4" alt="avatar"></div> <div class="d-flex flex-column justify-center"><p class="my-0"><strong class="name">k1005</strong></p> <p class="my-0 grey--text" style="font-size:0.9em">Programing tech blog</p></div></div> <p class="mt-4 mb-0">필요한 기술문서를 <strong>번역</strong> 하여 저장하기도 하고, 기술활용 그리고 <strong>개발</strong>과 <strong>코딩</strong>에 관련된 이야기들을 담고 있습니다.</p> <div class="component-sns-links mt-1"><ul class="my-0 d-flex" style="font-size:1.7rem;"><li style="margin-right:0.5em;"><a href="https://twitter.com/erim1005" target="_blank" rel="noopener noreferrer" aria-label="twitter"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-twitter fa-w-16"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li style="margin-right:0.5em;"><a href="https://github.com/k1005" target="_blank" rel="noopener noreferrer" aria-label="github"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="svg-inline--fa fa-github fa-w-16"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li></ul></div></section> <section class="block tags"><div class="d-flex align-center mb-5"><h3 class="ma-0">Hot Tags</h3> <a href="/tag/" class="ml-3">See all</a></div> <a href="/tag/vuejs/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      vuejs
    </span></a><a href="/tag/javascript/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      javascript
    </span></a><a href="/tag/frontend/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      frontend
    </span></a><a href="/tag/development/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      development
    </span></a><a href="/tag/MDS/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      MDS
    </span></a><a href="/tag/molecule dynimics system/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      molecule dynimics system
    </span></a><a href="/tag/test javascript/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      test javascript
    </span></a><a href="/tag/전문가 처럼 테스트하기/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      전문가 처럼 테스트하기
    </span></a><a href="/tag/open babel/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      open babel
    </span></a><a href="/tag/convert molecule/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      convert molecule
    </span></a><a href="/tag/jest/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      jest
    </span></a><a href="/tag/mock/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      mock
    </span></a><a href="/tag/나만의 Vue.js 라우터 만들기/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      나만의 Vue.js 라우터 만들기
    </span></a><a href="/tag/vue-router/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      vue-router
    </span></a><a href="/tag/lazy loading/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      lazy loading
    </span></a><a href="/tag/component 재사용/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      component 재사용
    </span></a><a href="/tag/sass/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      sass
    </span></a><a href="/tag/웹 사이트 에러 메시지/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      웹 사이트 에러 메시지
    </span></a><a href="/tag/web/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      web
    </span></a><a href="/tag/http error message/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      http error message
    </span></a></section> <section class="block recent-posts"><h3 class="mt-0 mb-5">Recent Posts</h3> <ul><li><a href="/2021/08/18/vuejs%E1%84%8B%E1%85%B4-%E1%84%8C%E1%85%B5%E1%84%8B%E1%85%A7%E1%86%AB-%E1%84%85%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC-%E1%84%86%E1%85%B5%E1%86%BE-%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3-%E1%84%87%E1%85%AE%E1%86%AB%E1%84%92%E1%85%A1%E1%86%AF/">Vue.js의 지연 로딩 및 코드 분할</a></li><li><a href="/2021/08/14/%E1%84%89%E1%85%A1%E1%84%85%E1%85%A1%E1%86%B7%E1%84%83%E1%85%B3%E1%86%AF%E1%84%8B%E1%85%B5-vue3%E1%84%8B%E1%85%A6-%E1%84%92%E1%85%AA%E1%84%82%E1%85%A2%E1%84%82%E1%85%B3%E1%86%AB-%E1%84%8B%E1%85%B5%E1%84%8B%E1%85%B2/">사람들이 Vue3 에 화난 이유</a></li><li><a href="/2021/08/14/gitbug-token-authentication/">Github Token Authentication</a></li><li><a href="/2021/08/14/vuejs-%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%A9%E1%84%82%E1%85%A5%E1%86%AB%E1%84%90%E1%85%B3-%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%E1%84%92%E1%85%AA-%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5/">VueJS 컴포넌트 구조화 하기</a></li><li><a href="/2021/08/10/reusing-logic-in-vue-components/">Vue 컴포넌트에서 로직 재사용하기</a></li><li><a href="/2021/08/08/vuepress-plugin-last-updated-error/">error vuepress-plugin-sitemap apply generated failed</a></li><li><a href="/2021/08/07/async-vuejs-components/">Async Vue.js Components</a></li><li><a href="/2021/08/07/infinite-scroll-component/">Intersection Observer API를 사용하여 무한 스크롤 구성 요소 빌드</a></li><li><a href="/2021/08/07/globally-load-sass-into-vuejs-app/">Vue.js 애플리케이션에 SASS를 전역적으로 로드하기</a></li><li><a href="/2021/08/05/_01-install/">1. RDKit 설치</a></li></ul></section>  <section class="block recent-posts" data-v-10cc02f5><h3 class="mt-0 mb-5" data-v-10cc02f5>Recent Pages</h3> <ul data-v-10cc02f5><li data-v-10cc02f5><a href="/profile/" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:320px;" data-v-10cc02f5>Profile</a></li></ul></section></div></div><div class="v-navigation-drawer__border"></div></aside> <main class="v-main" style="padding-top:56px;padding-right:0px;padding-bottom:0px;padding-left:0px;"><div class="v-main__wrap"><div class="container"><div class="d-md-flex"><div id="content"><article class="component-page"><div></div> <header class="mb-12"><div class="metadata"><div class="d-flex"><div class="published-at"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="clock" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-clock fa-w-16"><path fill="currentColor" d="M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"></path></svg> <time datetime="2021-08-04T22:00:00.000Z">
            2021-08-05
          </time></div> <!----> <div class="author ml-3"><span class="name"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="user" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-user fa-w-14"><path fill="currentColor" d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path></svg> <a href="/author/k1005">k1005</a></span> <!----></div></div></div> <h1 class="mt-2 mb-3">3. 테스트 더블</h1> <div class="tags"><a href="/tag/development/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
        development
      </span></a><a href="/tag/frontend/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
        frontend
      </span></a><a href="/tag/javascript/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
        javascript
      </span></a><a href="/tag/vuejs/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
        vuejs
      </span></a><a href="/tag/전문가 처럼 테스트하기/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
        전문가 처럼 테스트하기
      </span></a><a href="/tag/test javascript/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
        test javascript
      </span></a><a href="/tag/mock/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
        mock
      </span></a><a href="/tag/jest/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
        jest
      </span></a></div> <!----></header> <div></div> <section><div class="content__default"><h1 id="_3-테스트-더블"><a href="#_3-테스트-더블" class="header-anchor">#</a> 3. 테스트 더블</h1> <blockquote><p>Written by Alex Jover Morales</p></blockquote> <p>Test doubles, spies, and mocking, 모두 흥미롭게 들리지만 실제로 의미하는 바는 무엇입니까?
정말로 내 코드를 감시해야 합니까, 아니면 mocking 해야 합니까? 알아 보자!</p> <h2 id="의존성-다루기"><a href="#의존성-다루기" class="header-anchor">#</a> 의존성 다루기</h2> <p>애플리케이션을 빌드할 때 코드를 구조화하기 시작하여 애플리케이션 전체에서 가져오고 재사용하는 다른 구성 요소와 모듈로 코드를 분리합니다.</p> <p>모듈이 다른 모듈을 가져올 때 마지막 모듈이 첫 번째 모듈의 종속성이 됩니다.
예를 들어, 학생 ID의 존재를 확인 하는 함수 <code>validateStudent</code> 가 있는 <code>student-utils.js</code> 모듈 이 있다고 상상해 보십시오.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// student-utils.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">validateStudent</span> <span class="token operator">=</span> <span class="token parameter">student</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">Boolean</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>id <span class="token operator">&amp;&amp;</span> student<span class="token punctuation">.</span>id <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>그리고 다른 모듈 <code>student.js</code> 에서 사용합니다 .</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// student.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> validateStudent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./student-utils&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> name <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">validateStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid student: it doesn't have an id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> student<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>그러면 <code>student-utils</code>는 <code>student</code>의 종속성이 됩니다.
즉, <code>student</code>를 사용할 때마다 암시적으로 <code>student-utils</code>도 함께 사용됩니다.</p> <p>이 종속성은 논리적으로 보이고 무해해 보일 수 있지만 종속성은 종종 모듈을 테스트하기 어렵게 만들 수 있습니다. 질문은...</p> <h3 id="종속성이-테스트를-어렵게-만드는-경우는-언제입니까"><a href="#종속성이-테스트를-어렵게-만드는-경우는-언제입니까" class="header-anchor">#</a> 종속성이 테스트를 어렵게 만드는 경우는 언제입니까?</h3> <p>단순: 종속성에 부작용이 있는 경우. 부작용이란 API, 데이터베이스, 일종의 상태 등과 같은 외부적인 것을 호출하는 함수를 의미합니다.</p> <p>마지막 예제는 <code>validateStudent</code>가 학생을 받아 ID에 대해 몇 가지 검사를 수행하기 때문에 간단하고 순수합니다. 따라서 부작용이 없습니다.</p> <p>그러나 API를 호출하는 <code>fetchStudent</code> 함수가 있다고 상상해보십시오.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// student-utils.js</span>
<span class="token keyword">const</span> baseUrl <span class="token operator">=</span> <span class="token string">&quot;https://jsonplaceholder.typicode.com/users/&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">fetchStudent</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>baseUrl <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> student<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>단위 또는 통합 테스트를 수행할 때 추가 종속성을 피하면서 단위 또는 시스템의 일부를 테스트하려고 합니다.
<code>fetchStudent</code> 함수는 외부 호출에 의존하기 때문에 부작용이 있으므로 테스트가 중단되거나 일관성이 없습니다.</p> <p>테스트 더블이 작동하는 곳입니다.</p> <h2 id="테스트-더블이란"><a href="#테스트-더블이란" class="header-anchor">#</a> 테스트 더블이란?</h2> <p>스턴트 더블을 생각해 보세요. 어떤 위험한 스턴트를 수행해야 할 때 실제 배우를 대신하는 사람입니다.</p> <p>테스트 더블은 스턴트 더블과 관련이 있습니다.
테스트를 더 쉽게 만들고 종속성을 분리하기 위해 원래 <code>~~test~~</code> 항목을 대체하는 개체입니다.</p> <p>케이스에 따라 단위 테스트, 통합 테스트에 자주 사용됩니다.
우리가 달성하고자 하는 것은 <strong>부작용을 수행하는 종속성</strong>을 <strong>동일한 인터페이스를 공유하는 테스트</strong>로 이중으로 대체하는 것입니다.</p> <p>다양한 유형의 테스트 더블이 있으며, 각각은 <strong>spies</strong>, <strong>stubs</strong>, <strong>mocks</strong> 등 목적이 다릅니다.</p> <h3 id="spies"><a href="#spies" class="header-anchor">#</a> Spies</h3> <p>스파이는 테스트 항목을 관찰하고 무언가가 호출된 횟수를 세는 데 사용되지만 구현을 변경하지는 않습니다.</p> <p>부작용이 없어 의존성을 교체할 필요가 없는 경우에 일반적으로 사용됩니다.</p> <p>이전 예제의 <code>validateStudent</code> 함수의 경우가 완벽합니다.
구현을 대체하는 것은 의미가 없습니다.
학생에게서 테스트하고 싶은 것은 학생이 생성될 때 유효성이 검사된다는 것입니다.</p> <p>이제 학생이 올바르게 생성되었는지 확인하기 위해 어떤 종류의 스파이도 사용하지 않고 학생 생성의 첫 번째 테스트를 구현해 보겠습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> createStudent <span class="token keyword">from</span> <span class="token string">&quot;./student&quot;</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Student&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;can create a student passing an id and name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>테스트는 기본적으로 사용자가 생성되었고 올바른 ID를 가지고 있다고 주장합니다.
그것은 올바른 경우이지만 잘못된 테스트의 경우 예외가 트리거되었는지 확인해야 합니다.</p> <p>Jest는 예외를 위한 <code>toThrow</code> 매처와 함께 제공되며 이는 우리의 사용 사례에 적합합니다.
특정 오류를 주장하는 인수도 허용합니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;throws an error if id is not passed&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// You can be more specific</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrow</span><span class="token punctuation">(</span>Error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">&quot;Invalid student: it doesn't have an id&quot;</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toThrow</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>아마도 당신은 이 테스트를 통해 우리가 <code>validateStudent</code> 함수를 암시적으로 테스트하고 있다는 것을 깨달았을 것입니다.
예외가 발생하면 학생은 유효하고 다른 경우에는 유효하지 않습니다.
<code>validateStudent</code> 함수를 별도로 테스트할 수도 있지만, <code>createStudent</code>가 이미 테스트했기 때문에 필요하지 않다고 말하는 경우 중 하나입니다.</p> <p>그러나 <code>createStudent</code> 함수가 아래에서 <code>validateStudent</code>를 호출하는지 명시적으로 확인하려는 경우 <code>jest.spyOn</code>을 사용하여 <code>validateStudent</code>에 대한 스파이를 만들 수 있습니다.</p> <p><code>spyOn</code> 함수에는 <code>spyOn(object, propName)</code> 서명이 있으므로 <code>validateStudent</code> 속성에서 모든 학생 유틸리티와 스파이를 가져와야 합니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> createStudent <span class="token keyword">from</span> <span class="token string">&quot;./student&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> utils <span class="token keyword">from</span> <span class="token string">&quot;./student-utils&quot;</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Student&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;calls the validateStudent function&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>utils<span class="token punctuation">,</span> <span class="token string">&quot;validateStudent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Aaron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>utils<span class="token punctuation">.</span>validateStudent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>나는 <code>utils.validateStudent</code>에서 <code>toBeCalled</code> 매처를 사용했는데, 이것은 함수가 호출되었다고 주장합니다.
호출된 횟수 또는 매개변수를 정의하여 보다 구체적으로 지정할 수 있습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">expect</span><span class="token punctuation">(</span>utils<span class="token punctuation">.</span>validateStudent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;Aaron&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>utils<span class="token punctuation">.</span>validateStudent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>우리는 여전히 뭔가를 놓치고 있습니다.
동일한 함수를 호출하는 다른 테스트를 만들고 각 테스트에서 정확히 한 번만 호출되었는지 확인하면 어떻게 될까요?</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Student&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;calls the validateStudent function&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> spy <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>utils<span class="token punctuation">,</span> <span class="token string">&quot;validateStudent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Aaron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;calls the validateStudent function&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> spy <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>utils<span class="token punctuation">,</span> <span class="token string">&quot;validateStudent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Peep&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="reset-mock-state"><a href="#reset-mock-state" class="header-anchor">#</a> Reset mock state</h3> <p>이 테스트가 통과할 것으로 예상할 수 있지만 두 번째 테스트는 다음 오류와 함께 실패합니다.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Expected mock function to have been called one time, but it was called two times.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>이는 첫 번째 테스트에서 이미 스파이를 설정하고 있고 두 번째 테스트에서 <code>jest.spyOn</code>을 다시 호출하더라도 <code>validateStudent</code> 함수가 이미 스파이되고 호출 카운터가 재설정되지 않아 호출이 누적되기 때문입니다.</p> <p>이러한 이유로 각 테스트 후에 스파이 카운터를 재설정하는 것이 매우 중요합니다. Jest는 이를 위해 세 가지 기능을 제공합니다.</p> <ul><li><code>mockClear</code>: 카운터만 재설정</li> <li><code>mockReset</code>: 구현을 포함하여 모의를 원래 상태로 재설정합니다.</li> <li><code>mockRestore</code>: <code>mockReset</code>과 유사하지만 모의 함수를 제거합니다.</li></ul> <p>Jest는 모의, 스텁 및 스파이를 모의 기능으로 일반화한다는 점을 명심하십시오.</p> <p>우리의 경우 <code>mockClear</code>와 <code>mockRestore</code> 모두 작동합니다:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;calls the validateStudent function&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> spy <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>utils<span class="token punctuation">,</span> <span class="token string">&quot;validateStudent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Aaron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  spy<span class="token punctuation">.</span><span class="token function">mockClear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;calls the validateStudent2 function&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> spy <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>utils<span class="token punctuation">,</span> <span class="token string">&quot;validateStudent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Peep&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  spy<span class="token punctuation">.</span><span class="token function">mockClear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="jest-hooks"><a href="#jest-hooks" class="header-anchor">#</a> Jest Hooks</h3> <p>모의 함수를 만들고 지우는 것이 매우 반복적일 수 있음을 알 수 있습니다.
운 좋게도 Jest에는 다양한 지점(<code>beforeEach</code>, <code>afterEach</code>, <code>beforeAll</code>, <code>afterAll</code>)에서 모든 작업을 수행하는 데 사용할 수 있는 후크가 있습니다.
범위는 해당 위치의 설명 기능입니다.</p> <p>우리의 경우 <code>afterEach</code>를 사용하여 각 테스트 후에 스파이를 정리할 수 있습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> createStudent <span class="token keyword">from</span> <span class="token string">&quot;./student&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> utils <span class="token keyword">from</span> <span class="token string">&quot;./student-utils&quot;</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Student&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> spy <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>utils<span class="token punctuation">,</span> <span class="token string">&quot;validateStudent&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    spy<span class="token punctuation">.</span><span class="token function">mockClear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;calls the validateStudent function&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Aaron&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;calls the validateStudent2 function&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Peep&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledTimes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>그리고 보시다시피, 우리는 반복을 피합니다.</p> <p>이 경우 <code>beforeAll</code> 후크는 스파이를 설정하는 데 필요하지 않지만 그럴 수 있는 더 복잡한 경우가 있습니다.
예를 들어 데이터베이스 정리와 같은 테스트를 실행하기 전에 비동기 작업을 수행해야 한다고 가정해 보겠습니다.</p> <p>이러한 경우 후크와 <code>it</code> 테스트 함수는 모두 약속을 반환할 수 있으며 해결될 때까지 기다립니다. 예를 들어:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;Dummy example&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>더 멋지고 동기화와 유사한 구문을 위해 <code>async/await</code> 구문을 사용할 수도 있습니다. 다음 예는 이전과 동일합니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;Dummy example&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="mocks-and-stubs"><a href="#mocks-and-stubs" class="header-anchor">#</a> Mocks and Stubs</h2> <p>모의 객체와 스텁의 차이점은 논란의 여지가 있으며 명확하지 않습니다.
둘 다 동일한 것을 달성합니다.
테스트의 종속성을 분리하기 위해 실제 구현을 가짜 구현으로 바꾸는 것입니다.</p> <p>일부는 스텁 구현이 정적이지만 모의는 테스트별로 동적이라고 말합니다.
어쨌든, 지금부터 우리는 그것들을 모두 <strong>mock</strong>이라고 부를 것입니다.</p> <p>모의에 들어가기 전에 <code>student-utils.js</code>의 <code>fetchStudent</code> 함수를 사용하는 가져오기 함수를 <code>student.js</code>에 구현해 보겠습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> validateStudent<span class="token punctuation">,</span> fetchStudent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./student-utils&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> name <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">validateStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid student: it doesn't have an id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Add the fetch function before returning the object</span>
  student<span class="token punctuation">.</span><span class="token function-variable function">fetch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetchStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> student<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>먼저 종속성과 부작용의 문제를 확인하기 위해 조롱 없이 <code>student.fetch</code> 함수를 테스트할 것입니다.
그런 다음 이러한 문제를 피하기 위해 종속성 주입 기술과 <code>mocking</code>을 살펴보겠습니다.</p> <p><code>fetch</code> 함수를 호출하고 일부 데이터를 주장하는 테스트를 <code>student.test.js</code>에 추가하여 시작합니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;student.fetch&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;returns data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> student<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;Bret&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>문제는 테스트를 실행하면 <code>student-utils.js</code>에서 가져오기 기능을 찾지 못하기 때문에 실패한다는 것입니다.</p> <h3 id="전제-조건-jest-설정-및-폴리필-가져오기"><a href="#전제-조건-jest-설정-및-폴리필-가져오기" class="header-anchor">#</a> 전제 조건: Jest 설정 및 폴리필 가져오기</h3> <p>문제는 Jest가 브라우저를 에뮬레이트하는 노드 환경인 JSDom 위에서 실행된다는 것입니다.
Fetch API는 최신 브라우저에서 구현된 웹 표준이며 Jest에서는 사용할 수 없습니다.</p> <p>작동하게 하려면 최신 브라우저에서 누락된 기능을 구현하는 라이브러리인 폴리필을 사용해야 합니다.
Node.js와 브라우저 모두에서 작동하기 때문에 우리는 <code>isomorphic-fetch</code>를 사용할 것입니다.
다음을 설치하여 시작하십시오.</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev isomorphic-fetch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Jest는 기본적으로 작동하지만 많은 구성 옵션을 사용할 수 있습니다.
더 많은 유연성이 필요한 경우 &quot;jest&quot; 속성을 <code>package.json</code>에 추가하거나 <code>jest.config.js</code> 파일을 만들어 설정할 수 있습니다.
더 간단하고 추가 파일이 필요하지 않기 때문에 우리는 <code>package.json</code> 접근 방식을 사용할 것입니다.</p> <p>모든 Jest 옵션 중에서 <code>setupScripts</code>를 사용하고 스크립트 경로를 전달할 수 있습니다.
이것은 테스트를 실행하기 전에 몇 가지 준비를 해야 하는 이와 같은 경우에 유용합니다.
<code>setupTests</code> 파일을 전달하는 <code>package.json</code>에서 설정해 보겠습니다.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;setupFiles&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./setupTests&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>그런 다음 프로젝트의 루트에 <code>setupTests.js</code>를 만들고 <code>isomorphic-fetch</code>를 <code>global.fetch</code> 속성에 할당합니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>global<span class="token punctuation">.</span>fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;isomorphic-fetch&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>참고: <code>global</code> 은 Node.js 환경의 <code>window</code>와 동일합니다.</p></div> <p>테스트를 다시 실행하면 더 이상 <code>fetch</code> 기능을 찾지 못해 충돌이 발생하지 않습니다.</p> <h3 id="왜-mocking-인가"><a href="#왜-mocking-인가" class="header-anchor">#</a> 왜 mocking 인가?</h3> <p>테스트로 돌아가서:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;returns data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> student<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;Bret&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>이 글을 쓰는 날까지 이 테스트는 통과하고 있습니다. 그러나 이 테스트가 잘못된 몇 가지 이유가 있습니다.</p> <p>후드 아래에서 실제 가져오기 기능을 사용하는 <code>fetchStudent</code> 유틸리티를 사용합니다.
인터넷에 의존합니다.
서버의 응답은 완전히 예측할 수 없습니다. 사용자 이름은 언제든지 변경할 수 있습니다.
이러한 이유로 이 테스트는 전혀 신뢰할 수 없습니다.
그리고 가장 중요한 것은 테스트의 목적은 <code>student.fetch</code>가 호출되고 데이터를 반환하는지 확인하는 것이지만 다른 것은 신경 쓰지 않습니다.
이는 단위 테스트 시 대부분의 테스트에 적용됩니다.
추가 종속성을 피하면서 하나의 특정 사례를 테스트하는 데 집중해야 합니다.</p> <h3 id="의존성-주입"><a href="#의존성-주입" class="header-anchor">#</a> 의존성 주입</h3> <p>mocking 외에도 종속성을 처리하는 데 사용할 수 있는 다른 기술이 있습니다.</p> <p>종속성 주입은 외부에서 개체에 종속성을 전달하도록 지시하는 디자인 패턴입니다.
그런 식으로 해당 개체에는 하드 코딩된 종속성이 없습니다.
그런 식으로 그 종속성은 &quot;다른 누군가&quot;가 해당 개체의 사용자라는 문제입니다.</p> <p>예를 들어 이해하면 더 쉬울 수 있습니다. 현재 <code>student.js</code>는 <code>fetchStudent</code> 함수에 대해 <code>student-utils.js</code>에 의존합니다.
예를 들어 <code>createStudent</code> 함수의 매개변수로 외부에서 <code>fetchStudent</code> 함수를 전달하면 더 이상 해당 종속성이 없습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> validateStudent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./student-utils&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> fetchStudent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> name <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">validateStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid student: it doesn't have an id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  student<span class="token punctuation">.</span><span class="token function-variable function">fetch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetchStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> student<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>보시다시피 <code>createStudent</code>의 3번째 매개변수에 제공하고 있습니다.
<code>validateStudent</code>에도 동일하게 적용할 수 있지만 해당 기능은 문제가 되지 않으므로 무시할 수 있습니다.</p> <p>의존성을 깨뜨렸으므로 이제 <code>createStudent</code>에 자체 함수를 전달하여 쉽게 테스트할 수 있습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;student.fetch&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">fetchStudent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token string">&quot;Bret&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;returns data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> fetchStudent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> student<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;Bret&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>이제 우리는 이 테스트를 신뢰할 수 있게 만들었습니다.
인터넷이나 외부 데이터 소스에 의존하지 않고 목표를 달성합니다.
그리고 가장 좋은 점은 조롱할 필요가 전혀 없고 기술만 있으면 된다는 것입니다.</p> <p>의존성 주입의 단점은 더 많은 상용구가 필요하다는 것입니다.
이제 <code>createStudent</code>를 호출할 때마다 <code>fetchStudent</code> 함수를 전달해야 합니다.
종속성을 연결하는 추상화를 언제든지 만들 수 있습니다.
결국 이것은 기술이니, 상황에 도움이 될 때 사용하세요.</p> <h3 id="mock-사용하기"><a href="#mock-사용하기" class="header-anchor">#</a> Mock 사용하기</h3> <p>Jest에는 매우 강력한 기능인 모의 기능이 있습니다. 생성하려면 <code>jest.fn()</code>에서 결과를 얻는 것만 큼 간단합니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> myMock <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>스파이로부터 동일한 <code>callable</code> API를 공유하므로 호출되었는지 확인할 수 있습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">myMock</span><span class="token punctuation">(</span><span class="token string">&quot;hiyaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>myMock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span><span class="token string">&quot;hiyaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myMock<span class="token punctuation">.</span><span class="token function">mockClear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>또한 <code>jest.fn</code>에 매개변수로 함수를 전달하여 구현을 정의할 수 있습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> myMock <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>더 세분화된 제어가 필요한 경우 <code>mockImplementationOnce</code> 및 <code>mockImplementation</code> 함수를 사용할 수 있습니다.
첫 번째는 원 호출 구현을 정의하고 다른 하나는 기본 구현을 정의합니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> myMock <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">12</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockImplementationOnce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Caribu cola&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Miau&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;Caribu cola&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// From here, it'll be always Miau</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;Miau&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">myMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;Miau&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>모의 함수를 사용하여 <code>fetchStudent</code>의 이전 예제를 구현할 수 있습니다. 호출을 확인할 수 있습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fetchStudent <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token string">&quot;Bret&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;returns data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> fetchStudent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> student<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;Bret&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>fetchStudent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>모의 함수가 매우 강력하다는 것을 알 수 있지만 종속성 주입을 사용하지 않고 모듈을 모의하는 방법을 여전히 모릅니다.</p> <h3 id="mocking-modules"><a href="#mocking-modules" class="header-anchor">#</a> Mocking modules</h3> <p>의존성 주입을 사용하기 전에 코드로 시간을 되돌려 보겠습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> validateStudent<span class="token punctuation">,</span> fetchStudent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./student-utils&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  student<span class="token punctuation">.</span><span class="token function-variable function">fetch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetchStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Jest는 종속성 주입을 사용하지 않고 종속성을 제거하는 좋은 방법인 모의 모듈을 제공합니다.
모의할 모듈 경로를 첫 번째 인수로 사용하는 <code>jest.mock</code> 함수를 사용하여 모듈을 모의할 수 있습니다.</p> <p><code>jest.mock</code>은 전체 모듈을 <strong>mock</strong>하고 <code>fetchStudent</code> 함수를 <strong>mock</strong>하고 싶기 때문에 이를 리팩토링하고 <code>student-service.js</code> 모듈로 옮겨야 합니다.
HTTP 동사 규칙을 준수하도록 <code>get</code> 이름을 변경하여 객체를 반환합니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// student-service.js</span>
<span class="token keyword">const</span> baseUrl <span class="token operator">=</span> <span class="token string">&quot;https://jsonplaceholder.typicode.com/users/&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>baseUrl <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>그리고 그에 따라 <code>student.js</code>를 업데이트합니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> validateStudent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./student-utils&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> studentService <span class="token keyword">from</span> <span class="token string">&quot;./student-service&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  student<span class="token punctuation">.</span><span class="token function-variable function">fetch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> studentService<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>테스트는 리팩터링 이전과 동일한 방식으로 작동해야 합니다.</p> <p>이제 <code>students-service</code> 모듈을 <strong>mock</strong>하기 위해 <code>jest.mock</code>을 사용할 수 있습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// student.test.js</span>
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;./student-service&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;student.fetch&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;returns data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> student<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;Brat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>jest.mock</code>은 파일 상단에 호이스트되므로 혼동을 피하기 위해 항상 상단에 작성합시다.</p></div> <p>마찬가지로 <code>jest.mock</code>은 자동으로 <code>students-service</code> 모듈에서 반환된 각 속성을 빈 <code>jest.fn</code> 구현으로 <strong>mock</strong>합니다.
즉, 그 시점부터 학생 서비스 구현은 다음과 같습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  get<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>이것이 바로 <code>student.fetch()</code>가 어떤 값도 반환하지 않기 때문에 테스트를 실행하면 실패하는 이유입니다.
그러나 우리는 <code>students-service</code>를 가져오고 <code>get</code> 호출을 확인할 수 있습니다.
mock 함수의 시작입니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;./student-service&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> studentService <span class="token keyword">from</span> <span class="token string">&quot;./student-service&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;returns data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> student<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>studentService<span class="token punctuation">.</span>get<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>더 세분화된 구현이 필요한 경우 <code>jest.mock</code>은 두 번째 인수로 해당 모듈의 사용자 지정 모의 구현을 갖는 팩토리 함수를 받을 수 있습니다.
예를 들어, 임의의 값으로 해석되는 <code>promise</code>를 반환하는 <code>get</code> 함수를 만들어 보겠습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;./student-service&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;Yay&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;returns data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> student<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;Yay&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>이 시점에서 모듈 모의를 적용하는 여러 가지 방법을 보았습니다. 모두 쉽게 코드 종속성을 제거할 수 있습니다.</p> <p>상상할 수 있듯이 실제 앱에는 이러한 서비스가 많이 있으며 대부분의 경우 가져오기 기능 구현에 신경 쓰지 않고 호출되기를 원하지 않습니다.</p> <p>더 쉽고 간결한 방법이 있다고 말하면 어떨까요?</p> <h2 id="mock-files"><a href="#mock-files" class="header-anchor">#</a> Mock files</h2> <p>Jest는 다시 한 번 mock 기능이 돋보입니다. 모든 모듈의 mock 구현을 정의할 수 있는 mock 파일을 정의할 수 있습니다.</p> <p>mock 파일은 규칙에 따라 작동합니다.
mock 하려는 모듈과 동일한 수준에 <code>*mocks*******</code> 폴더를 생성하기만 하면 됩니다.
예를 들어, 모듈이 <code>*src/student.js*</code>에 있는 경우 <code>*src/mocks/student.js*</code>에서 생성해야 합니다.
Jest는 <code>jest.mock(&quot;/student.js&quot;)</code>을 호출할 때 <code>student</code> 모듈에 mock 객체가 있음을 감지하고 적용됩니다.</p> <p>이전 예제에서 mock 코드를 분리하고 필요한 모든 테스트에서 재사용하기 위해 <code>mocks/student-service.js</code> 파일을 만들 수 있습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// __mocks__/student-service.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  get<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">id</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>그리고 테스트에서 사용자 정의 구현을 제거하세요.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// student.test.js</span>
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;./student-service&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;returns data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> student<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>더 복잡하고 확장된 구현을 포함하는 많은 모듈이 있는 중형에서 대형 코드베이스에서 이는 모든 테스트에 대한 추가 설정을 피하고 테스트 및 소스 코드에서 mock 코드를 분리합니다.</p> <p>우리는 이 예를 더 개선할 수 있습니다. 그것이 mock의 전부는 아니지만 소프트웨어 개발은 기술과 디자인 패턴에 관한 것임을 기억하십시오.</p> <p>실제 응용 프로그램에서는 <code>fetch</code> function, axios 또는 사용하는 모든 것에 대해 고유한 API 클라이언트 추상화를 구현하는 것이 일반적입니다.
그러면 모든 테스트에 대해 해당 API 모듈을 자동으로 mock 할 수 있으므로 API를 호출하는 모든 서비스를 mock 할 필요가 없습니다.</p> <p><code>api.js</code> 파일을 만들어 예제를 시작하겠습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// api.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>그런 다음 <code>student-service</code>에서 가져와서 사용합니다:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// student-service.js</span>
<span class="token keyword">import</span> api <span class="token keyword">from</span> <span class="token string">&quot;./api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> baseUrl <span class="token operator">=</span> <span class="token string">&quot;https://jsonplaceholder.typicode.com/users/&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> api<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>baseUrl <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>그리고 여기 멋진 부분이 있습니다.
이전에 만든 <code>setupTests.js</code> 파일 에서 전역적으로 mock 할 수 있습니다.
<code>./api.js</code> 는 우리가 항상 mock 하기를 원하는 파일이기 때문에 완전히 의미가 있습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// setupTests.js </span>
global<span class="token punctuation">.</span>fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;isomorphic-fetch&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;./src/api&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>그렇게 하면 더 이상 테스트에서 서비스를 mock 하거나 API 를 mcok 할 필요가 없어 더 깨끗하고 간결해집니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">/</span> student<span class="token punctuation">.</span>test<span class="token punctuation">.</span>js
<span class="token keyword">import</span> createStudent <span class="token keyword">from</span> <span class="token string">&quot;./student&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> utils <span class="token keyword">from</span> <span class="token string">&quot;./student-utils&quot;</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Student&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;student.fetch&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;returns data&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> student <span class="token operator">=</span> <span class="token function">createStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> student<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;https://jsonplaceholder.typicode.com/users/1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>특정 테스트에 대한 구현을 계속 다시 작성할 수 있음을 명심하십시오.
따라서 다른 테스트에서 api의 사용자 정의 구현이 필요하지 않은 경우에도 여전히 수행할 수 있습니다.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// student.test.js</span>
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&quot;./student-service&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  get<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Something different meh :S&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div></section> <div data-v-0fdd39d6></div></article></div> <aside id="sidebar" class="d-none d-md-block"><div class="component-sidebar"><div></div> <div class="search-box mb-5"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <section class="block profile"><h3 class="mt-0 mb-5">Profile</h3> <div class="d-flex"><div class="v-avatar mr-3" style="height:48px;min-width:48px;width:48px;"><img src="https://avatars.githubusercontent.com/u/8636642?v=4" alt="avatar"></div> <div class="d-flex flex-column justify-center"><p class="my-0"><strong class="name">k1005</strong></p> <p class="my-0 grey--text" style="font-size:0.9em">Programing tech blog</p></div></div> <p class="mt-4 mb-0">필요한 기술문서를 <strong>번역</strong> 하여 저장하기도 하고, 기술활용 그리고 <strong>개발</strong>과 <strong>코딩</strong>에 관련된 이야기들을 담고 있습니다.</p> <div class="component-sns-links mt-1"><ul class="my-0 d-flex" style="font-size:1.7rem;"><li style="margin-right:0.5em;"><a href="https://twitter.com/erim1005" target="_blank" rel="noopener noreferrer" aria-label="twitter"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-twitter fa-w-16"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li style="margin-right:0.5em;"><a href="https://github.com/k1005" target="_blank" rel="noopener noreferrer" aria-label="github"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="svg-inline--fa fa-github fa-w-16"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li></ul></div></section> <section class="block tags"><div class="d-flex align-center mb-5"><h3 class="ma-0">Hot Tags</h3> <a href="/tag/" class="ml-3">See all</a></div> <a href="/tag/vuejs/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      vuejs
    </span></a><a href="/tag/javascript/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      javascript
    </span></a><a href="/tag/frontend/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      frontend
    </span></a><a href="/tag/development/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      development
    </span></a><a href="/tag/MDS/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      MDS
    </span></a><a href="/tag/molecule dynimics system/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      molecule dynimics system
    </span></a><a href="/tag/test javascript/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      test javascript
    </span></a><a href="/tag/전문가 처럼 테스트하기/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      전문가 처럼 테스트하기
    </span></a><a href="/tag/open babel/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      open babel
    </span></a><a href="/tag/convert molecule/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      convert molecule
    </span></a><a href="/tag/jest/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      jest
    </span></a><a href="/tag/mock/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      mock
    </span></a><a href="/tag/나만의 Vue.js 라우터 만들기/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      나만의 Vue.js 라우터 만들기
    </span></a><a href="/tag/vue-router/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      vue-router
    </span></a><a href="/tag/lazy loading/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      lazy loading
    </span></a><a href="/tag/component 재사용/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      component 재사용
    </span></a><a href="/tag/sass/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      sass
    </span></a><a href="/tag/웹 사이트 에러 메시지/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      웹 사이트 에러 메시지
    </span></a><a href="/tag/web/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      web
    </span></a><a href="/tag/http error message/" draggable="false" class="unstyled mr-1 mb-1 v-chip v-chip--clickable v-chip--link v-chip--no-color theme--light v-size--small"><span class="v-chip__content">
      http error message
    </span></a></section> <section class="block recent-posts"><h3 class="mt-0 mb-5">Recent Posts</h3> <ul><li><a href="/2021/08/18/vuejs%E1%84%8B%E1%85%B4-%E1%84%8C%E1%85%B5%E1%84%8B%E1%85%A7%E1%86%AB-%E1%84%85%E1%85%A9%E1%84%83%E1%85%B5%E1%86%BC-%E1%84%86%E1%85%B5%E1%86%BE-%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3-%E1%84%87%E1%85%AE%E1%86%AB%E1%84%92%E1%85%A1%E1%86%AF/">Vue.js의 지연 로딩 및 코드 분할</a></li><li><a href="/2021/08/14/%E1%84%89%E1%85%A1%E1%84%85%E1%85%A1%E1%86%B7%E1%84%83%E1%85%B3%E1%86%AF%E1%84%8B%E1%85%B5-vue3%E1%84%8B%E1%85%A6-%E1%84%92%E1%85%AA%E1%84%82%E1%85%A2%E1%84%82%E1%85%B3%E1%86%AB-%E1%84%8B%E1%85%B5%E1%84%8B%E1%85%B2/">사람들이 Vue3 에 화난 이유</a></li><li><a href="/2021/08/14/gitbug-token-authentication/">Github Token Authentication</a></li><li><a href="/2021/08/14/vuejs-%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%A9%E1%84%82%E1%85%A5%E1%86%AB%E1%84%90%E1%85%B3-%E1%84%80%E1%85%AE%E1%84%8C%E1%85%A9%E1%84%92%E1%85%AA-%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5/">VueJS 컴포넌트 구조화 하기</a></li><li><a href="/2021/08/10/reusing-logic-in-vue-components/">Vue 컴포넌트에서 로직 재사용하기</a></li><li><a href="/2021/08/08/vuepress-plugin-last-updated-error/">error vuepress-plugin-sitemap apply generated failed</a></li><li><a href="/2021/08/07/async-vuejs-components/">Async Vue.js Components</a></li><li><a href="/2021/08/07/infinite-scroll-component/">Intersection Observer API를 사용하여 무한 스크롤 구성 요소 빌드</a></li><li><a href="/2021/08/07/globally-load-sass-into-vuejs-app/">Vue.js 애플리케이션에 SASS를 전역적으로 로드하기</a></li><li><a href="/2021/08/05/_01-install/">1. RDKit 설치</a></li></ul></section>  <section class="block recent-posts" data-v-10cc02f5><h3 class="mt-0 mb-5" data-v-10cc02f5>Recent Pages</h3> <ul data-v-10cc02f5><li data-v-10cc02f5><a href="/profile/" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:320px;" data-v-10cc02f5>Profile</a></li></ul></section></div> <div id="sticky"><div class="component-sticky"><div></div> <div class="component-toc"><nav class="scrollactive-nav"><ul><li class="level-0"><a href="/2021/08/04/_3-test-doubles/#의존성-다루기" class="scrollactive-item">의존성 다루기</a></li><li class="level-1"><a href="/2021/08/04/_3-test-doubles/#종속성이-테스트를-어렵게-만드는-경우는-언제입니까" class="scrollactive-item">종속성이 테스트를 어렵게 만드는 경우는 언제입니까?</a></li><li class="level-0"><a href="/2021/08/04/_3-test-doubles/#테스트-더블이란" class="scrollactive-item">테스트 더블이란?</a></li><li class="level-1"><a href="/2021/08/04/_3-test-doubles/#spies" class="scrollactive-item">Spies</a></li><li class="level-1"><a href="/2021/08/04/_3-test-doubles/#reset-mock-state" class="scrollactive-item">Reset mock state</a></li><li class="level-1"><a href="/2021/08/04/_3-test-doubles/#jest-hooks" class="scrollactive-item">Jest Hooks</a></li><li class="level-0"><a href="/2021/08/04/_3-test-doubles/#mocks-and-stubs" class="scrollactive-item">Mocks and Stubs</a></li><li class="level-1"><a href="/2021/08/04/_3-test-doubles/#전제-조건-jest-설정-및-폴리필-가져오기" class="scrollactive-item">전제 조건: Jest 설정 및 폴리필 가져오기</a></li><li class="level-1"><a href="/2021/08/04/_3-test-doubles/#왜-mocking-인가" class="scrollactive-item">왜 mocking 인가?</a></li><li class="level-1"><a href="/2021/08/04/_3-test-doubles/#의존성-주입" class="scrollactive-item">의존성 주입</a></li><li class="level-1"><a href="/2021/08/04/_3-test-doubles/#mock-사용하기" class="scrollactive-item">Mock 사용하기</a></li><li class="level-1"><a href="/2021/08/04/_3-test-doubles/#mocking-modules" class="scrollactive-item">Mocking modules</a></li><li class="level-0"><a href="/2021/08/04/_3-test-doubles/#mock-files" class="scrollactive-item">Mock files</a></li></ul></nav></div> <div></div></div></div></aside></div></div></div></main> <div><footer class="v-footer component-footer d-flex flex-column justify-center v-sheet theme--light"><div class="container d-flex flex-column flex-sm-row"><div class="component-sns-links d-flex flex-column justify-center mr-0 mr-sm-5"><ul class="my-0 d-flex" style="font-size:1.2em;"><li style="margin-right:0.7em;"><a href="https://twitter.com/erim1005" target="_blank" rel="noopener noreferrer" aria-label="twitter"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-twitter fa-w-16"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li style="margin-right:0.7em;"><a href="https://github.com/k1005" target="_blank" rel="noopener noreferrer" aria-label="github"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="svg-inline--fa fa-github fa-w-16"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li></ul></div> <ul class="d-flex flex-wrap mr-auto my-4 my-sm-0"><li class="d-flex flex-column justify-center"><a href="/profile">PROFILE</a></li></ul> <span class="d-flex flex-column justify-center">Hyeyumpa's Blog © 2021</span></div></footer> <div></div></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e5f7cc48.js" defer></script><script src="/assets/js/16.690b3b0e.js" defer></script><script src="/assets/js/3.38012cba.js" defer></script><script src="/assets/js/5.79f8738c.js" defer></script><script src="/assets/js/34.7b627c38.js" defer></script><script src="/assets/js/8.f0118cfa.js" defer></script><script src="/assets/js/11.48883e5c.js" defer></script>
  </body>
</html>
